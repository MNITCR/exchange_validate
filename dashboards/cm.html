<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <style>
        input#captcha{
            background-image: url(../imgCaptcha/captcha-bg.png);
            background-repeat: no-repeat;
            background-size: cover;
        }
    </style>
</head>
<body>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#resetPasswordModal">
        Launch demo modal
    </button>
     <!-- resetPassword -->
     <div class="modal fade" id="resetPasswordModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Forgot Password</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="captcha" class="form-label">Captcha</label>
                        <div class="input-group">
                            <input type="text" class="form-control fw-bold text-secondary" id="captcha" disabled>
                            <button class="btn btn-outline-secondary" type="button" id="reload-btn" style="border-radius: 0px 5px 5px 0px">
                                <i class="fas fa-redo-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="verify_Captcha" class="form-label">Verify Captcha</label>
                        <input type="text" class="form-control" id="verify_Captcha">
                        <div class="invalid-feedback">Captcha is not correct.</div>
                    </div>
                    <div class="mb-3">
                        <label for="newPassword" class="form-label">New Password</label>
                        <div class="input-group">
                            <input type="password" class="form-control" name="newPassword"  id="newPassword">
                            <button class="btn btn-outline-secondary" type="button" id="NewTogglePassword" style="border-radius: 0px 5px 5px 0px">
                                <i class="fa fa-eye-slash" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="resetPassword">Reset Password</button>
                </div>
            </div>
        </div>
    </div>

    <!-- <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.1.0/dist/jsQR.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script> -->
    <!-- <script src="https://cdn.rawgit.com/kazuhikoarase/qrcode-generator/0.2.5/qrcode.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>
</html>

<!-- <script>
    const captcha = document.getElementById('captcha');
    const reloadBtn = document.getElementById('reload-btn');
    const checkBtn = document.getElementById('verify_Captcha');
    const errorFeedback = document.querySelector('.invalid-feedback'); // Error message element

    //storing all captcha characters in array
    let allCharacters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O',
                        'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd',
                        'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's',
                        't', 'u', 'v', 'w', 'x', 'y', 'z', 0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
    function getCaptcha(){
    for (let i = 0; i < 6; i++) { //getting 6 random characters from the array
        let randomCharacter = allCharacters[Math.floor(Math.random() * allCharacters.length)];
        captcha.value += ` ${randomCharacter}`; //passing 6 random characters inside captcha innerText
        }
    }
    getCaptcha(); //calling getCaptcha when the page open
    //calling getCaptcha & removeContent on the reload btn click
    reloadBtn.addEventListener('click', function() {
        removeContent();
        getCaptcha();
    });

    function removeContent(){
        captcha.value = "";
    }

    // Add an event listener to the input element CheckCaptcha
    checkBtn.addEventListener('input', function() {
        validateCheckCaptcha(this);
    });


</script> -->


<script>
    const captcha = document.getElementById('captcha');
    const reloadBtn = document.getElementById('reload-btn');
    const checkBtn = document.getElementById('verify_Captcha');

    // Storing all captcha characters in an array
    let allCharacters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O',
                        'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd',
                        'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's',
                        't', 'u', 'v', 'w', 'x', 'y', 'z', 0, 1, 2, 3, 4, 5, 6, 7, 8, 9];

    function getCaptcha() {
        for (let i = 0; i < 6; i++) { // Getting 6 random characters from the array
            let randomCharacter = allCharacters[Math.floor(Math.random() * allCharacters.length)];
            captcha.value += ` ${randomCharacter}`; // Passing 6 random characters inside captcha value
        }
    }

    getCaptcha(); // Calling getCaptcha when the page opens

    // Calling getCaptcha & removeContent on the reload btn click
    reloadBtn.addEventListener('click', function() {
        removeContent();
        getCaptcha();
    });

    function removeContent() {
        captcha.value = "";
        checkBtn.value = "";
        checkBtn.classList.remove('is-valid');
    }

    // Add an event listener to the input element CheckCaptcha
    checkBtn.addEventListener('input', function() {
        validateCheckCaptcha(this);
    });

    function validateCheckCaptcha(input) {
        let inputVal = input.value.split('').join(' ').trim(); // Remove leading/trailing spaces
        let captchaVal = captcha.value.split(' ').join(' ').trim(); // Remove spaces in the captcha value

        console.log(inputVal);
        console.log(captchaVal);
        // Check if the input is empty
        if (inputVal === '') {
            input.classList.remove('is-valid', 'is-invalid');
            return;
        }

        if (inputVal.length === 11 && inputVal === captchaVal) {
            console.log(inputVal.length);
            console.log(captchaVal.length);
            input.classList.add('is-valid');
            input.classList.remove('is-invalid');
        } else {
            console.log(inputVal.length);
            console.log(captchaVal.length);
            input.classList.remove('is-valid');
            input.classList.add('is-invalid'); // Apply is-invalid class
        }
    }

</script>









<script>



    // Add an event listener to the input element password
    var PasswordInput = document.getElementById('newPassword');
    PasswordInput.addEventListener('input', function() {
        validateNewPassword(this);
    });


    // Function to validate the "Password" input
    function validateNewPassword(input) {
        var password = input.value;

        // Check if the input is empty
        if (password.trim() === '') {
            input.classList.remove('is-valid', 'is-invalid');
            return;
        }

        var specialCharacterRegex = /[!@#$%^&*()_+|'`:<>\?/\\]/;

        if (password.length > 6 && specialCharacterRegex.test(password)) {
            input.classList.add('is-valid');
            input.classList.remove('is-invalid');
        } else {
            input.classList.remove('is-valid');
            input.classList.add('is-invalid'); // Apply is-invalid class

        }
    }
    // hide and show NewTogglePassword
    document.getElementById('NewTogglePassword').addEventListener('click', function() {
        const passwordInput = document.getElementById('newPassword');
        const eyeIcon = this.querySelector('i');

        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            eyeIcon.classList.remove('fa-eye-slash');
            eyeIcon.classList.add('fa-eye');
        } else {
            passwordInput.type = 'password';
            eyeIcon.classList.remove('fa-eye');
            eyeIcon.classList.add('fa-eye-slash');
        }
    });
</script>
